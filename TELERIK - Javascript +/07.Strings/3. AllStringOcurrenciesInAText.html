<!DOCTYPE html>
<html>
<head>
    <title>All Substring Ocurrencies</title>
    <link href="styles/js-console.css" rel="stylesheet" />
    <link href="styles/styles.css" rel="stylesheet" />
</head>
<body>
    Write a JavaScript function that finds how many times a substring is contained in a given text (perform case insensitive search).
    <div id="js-console">
    </div>
    <script src="scripts/js-console.js"></script>
    <script src="scripts/my-js.js"></script>
    <script>
        var text = "We are living in an yellow submarine. We don't have anything else. Inside the submarine is very tight. So Yellow we are drinking all the day. We will move out of it in 5 days. In two days will increase it. Please yellow-come in.";
        jsConsole.writeLine("Text::: (try to search for 'in')");
        jsConsole.writeLine(text);

        //** using console-like block to get the input and print the result from the function
        execute("word: ", "word", "Matches: ", function (word) {

            return FindSubstrOcurrencies(word, text);

        }, false, true);


        function FindSubstrOcurrencies(word, text, isCaseSensitive) {
            if (word.length == 0) return "Not a valid input";

            //** by default it is not case sensitive. Add value "true" to perform case sensitive search
            isCaseSensitive = isCaseSensitive || false;
            var myRegExp =  new RegExp(word, "g");

            if (!isCaseSensitive) {
                myRegExp = new RegExp(myRegExp.source, "ig");
            }
            var matches = text.match(myRegExp);

           //** the following block returns an array of the start index of each occurency
           //** remove the comment lines if you want to check it
//            var results = new Array(); 
//            while (myRegExp.exec(text)) {
//                results.push(myRegExp.lastIndex-word.length);
//            }
//            jsConsole.writeLine(results);

            var occurs = 0;
            if (!!matches) occurs = matches.length;

            return occurs;
        }
    </script>
</body>
</html>
